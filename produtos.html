<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Produtos - StoQ</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
      }
      .container {
        width: 90%;
        margin: 0 auto;
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      header {
        text-align: center;
        margin: 20px 0;
      }
      nav {
        background-color: rgba(0, 0, 0, 0.747);
        color: white;
      }
      nav ul {
        list-style-type: none;
        padding: 0;
        display: flex;
        justify-content: center;
        background-color: #333;
        margin: 0;
      }
      nav ul li {
        margin: 0;
      }
      nav ul li a {
        color: white;
        text-decoration: none;
        padding: 15px 20px;
        display: block;
        font-family: Arial, sans-serif;
        font-weight: bold; /* Garante negrito nos links do menu */
      }
      nav ul li a:hover {
        background-color: #575757;
      }
      main {
        margin: 20px 0;
      }
      .product-info {
        text-align: center;
      }
      .product-info h2 {
        margin-bottom: 20px;
      }
      .table-container {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        background-color: #f9f9f9;
      }
      .center-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        border-radius: 8px;
        overflow: hidden;
      }
      .center-table th,
      .center-table td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: center;
      }
      .center-table th {
        background-color: #f2f2f2;
      }
      .center-table tbody tr:nth-child(even) {
        background-color: #f9f9f9;
      }
      .center-table tbody tr:hover {
        background-color: #f1f1f1;
      }
      .button-container {
        text-align: right;
        margin-bottom: 20px;
      }
      .button-container a {
        text-decoration: none;
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border-radius: 5px;
        border: none;
        cursor: pointer;
      }
      .button-container a:hover {
        background-color: #45a049;
      }
      .button-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .button-container h2 {
        margin: 0;
      }
      .button-container a {
        text-decoration: none;
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border-radius: 5px;
        border: none;
        cursor: pointer;
      }
      .button-container a:hover {
        background-color: #45a049;
      }
      /* Estilos para o pop-up */
      .popup {
        display: none;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background-color: #ffffff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        width: 90%;
        max-width: 400px;
        max-height: 90%;
        overflow-y: auto;
      }

      .popup h3 {
        margin-top: 0;
        font-size: 1.2rem;
        color: #333;
        text-align: center;
        border-bottom: 2px solid #4caf50;
        padding-bottom: 10px;
        margin-bottom: 20px;
      }

      .popup label {
        display: block;
        margin: 10px 0 5px;
        font-weight: bold;
        color: #555;
      }

      .popup input,
      .popup select {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 0.9rem;
        box-sizing: border-box;
      }

      .popup button {
        width: 100%;
        padding: 10px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      .popup button:hover {
        background-color: #45a049;
      }

      .popup-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
      }

      h1,
      h2,
      h3,
      th,
      td,
      label,
      button,
      a {
        font-family: Arial, sans-serif;
        font-weight: bold; /* Aplica negrito a todos os textos */
      }

      .edit-button,
      .delete-button {
        margin: 0 5px;
        text-decoration: none;
        cursor: pointer;
      }

      .edit-button i:hover {
        color: #45a049; /* Cor ao passar o mouse no botão de editar */
      }

      .delete-button i:hover {
        color: #c82333; /* Cor ao passar o mouse no botão de excluir */
      }
    </style>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Produtos - StoQ</h1>
      </header>
      <nav>
        <ul>
          <li><a href="index.html">Página Inicial</a></li>
          <li><a href="produtos.html">Produtos</a></li>
          <li><a href="categorias.html">Categorias</a></li>
          <li><a href="fornecedores.html">Fornecedores</a></li>
          <li><a href="entradas.html">Entradas</a></li>
          <li><a href="saidas.html">Saídas</a></li>
          <li><a href="logs.html">Logs de Atividades</a></li>
        </ul>
      </nav>
      <main>
        <section class="product-info">
          <div class="button-container">
            <h2>Lista de Produtos</h2>
            <div>
              <a href="#" id="novoProdutoButton">Novo Produto</a>
              <a href="#" id="filterButton">Filtrar</a>
            </div>
          </div>
          <div class="table-container">
            <table class="center-table">
              <thead>
                <tr>
                  <th>Foto</th>
                  <th>COD</th>
                  <th>Produto</th>
                  <th>Categoria</th>
                  <th>UN</th>
                  <th>Data</th>
                  <th>Fornecedor</th>
                  <th>Compra</th>
                  <th>Venda</th>
                  <th>Estoque</th>
                  <th>Estoque Mínimo</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <!-- Linhas da tabela serão adicionadas aqui -->
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>
    <div class="popup-overlay" id="popupOverlay"></div>
    <div class="popup" id="popup">
      <h3>Filtrar Produtos</h3>
      <label for="filterCod">COD</label>
      <input type="text" id="filterCod" />
      <label for="filterProduto">Produto</label>
      <input type="text" id="filterProduto" />
      <label for="filterCategoria">Categoria</label>
      <input type="text" id="filterCategoria" />
      <label for="filterUn">UN</label>
      <select id="filterUn">
        <option value="">Selecione</option>
        <option value="UN">UN</option>
        <option value="CX">CX</option>
      </select>
      <label for="filterFornecedor">Fornecedor</label>
      <select id="filterFornecedor">
        <option value="">Selecione</option>
      </select>
      <label for="filterEstoque">Estoque</label>
      <input type="text" id="filterEstoque" />
      <button id="applyFilter">Aplicar Filtro</button>
    </div>
    <div class="popup-overlay" id="novoProdutoPopupOverlay"></div>
    <div class="popup" id="novoProdutoPopup">
      <h3>Cadastrar Novo Produto</h3>
      <label for="novoProdutoFoto">Foto</label>
      <input type="text" id="novoProdutoFoto" placeholder="URL da foto" />
      <label for="novoProdutoCod">COD</label>
      <input type="text" id="novoProdutoCod" />
      <label for="novoProdutoNome">Produto</label>
      <input type="text" id="novoProdutoNome" />
      <label for="novoProdutoCategoria">Categoria</label>
      <input type="text" id="novoProdutoCategoria" />
      <label for="novoProdutoUn">UN</label>
      <select id="novoProdutoUn">
        <option value="">Selecione</option>
        <option value="UN">UN</option>
        <option value="CX">CX</option>
      </select>
      <label for="novoProdutoData">Data</label>
      <input type="date" id="novoProdutoData" />
      <label for="novoProdutoFornecedor">Fornecedor</label>
      <input type="text" id="novoProdutoFornecedor" />
      <label for="novoProdutoCompra">Preço de Compra</label>
      <input type="text" id="novoProdutoCompra" />
      <label for="novoProdutoVenda">Preço de Venda</label>
      <input type="text" id="novoProdutoVenda" />
      <label for="novoProdutoEstoque">Estoque</label>
      <input type="text" id="novoProdutoEstoque" />
      <label for="novoProdutoEstoqueMinimo">Estoque Mínimo</label>
      <input type="text" id="novoProdutoEstoqueMinimo" />
      <button id="cadastrarProduto">Cadastrar Produto</button>
    </div>
    <script>
      document.getElementById("filterButton").addEventListener("click", function () {
        document.getElementById("popupOverlay").style.display = "block";
        document.getElementById("popup").style.display = "block";
      });

      document.getElementById("popupOverlay").addEventListener("click", function () {
        document.getElementById("popupOverlay").style.display = "none";
        document.getElementById("popup").style.display = "none";
      });

      document.getElementById("applyFilter").addEventListener("click", function () {
        const cod = document.getElementById("filterCod").value.toLowerCase();
        const produto = document.getElementById("filterProduto").value.toLowerCase();
        const categoria = document.getElementById("filterCategoria").value.toLowerCase();
        const un = document.getElementById("filterUn").value.toLowerCase();
        const fornecedor = document.getElementById("filterFornecedor").value.toLowerCase();
        const estoque = document.getElementById("filterEstoque").value.toLowerCase();

        const rows = document.querySelectorAll(".center-table tbody tr");

        rows.forEach((row) => {
          const cells = row.querySelectorAll("td");
          const codMatch = cells[1].textContent.toLowerCase().includes(cod);
          const produtoMatch = cells[2].textContent.toLowerCase().includes(produto);
          const categoriaMatch = cells[3].textContent.toLowerCase().includes(categoria);
          const unMatch = cells[4].textContent.toLowerCase().includes(un);
          const fornecedorMatch = cells[6].textContent.toLowerCase().includes(fornecedor);
          const estoqueMatch = estoque ? cells[9].textContent.toLowerCase().includes(estoque) : true;

          if (codMatch && produtoMatch && categoriaMatch && unMatch && fornecedorMatch && estoqueMatch) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });

        document.getElementById("popupOverlay").style.display = "none";
        document.getElementById("popup").style.display = "none";
      });

      document.getElementById("novoProdutoButton").addEventListener("click", function () {
        document.getElementById("novoProdutoPopupOverlay").style.display = "block";
        document.getElementById("novoProdutoPopup").style.display = "block";
      });

      document.getElementById("novoProdutoPopupOverlay").addEventListener("click", function () {
        document.getElementById("novoProdutoPopupOverlay").style.display = "none";
        document.getElementById("novoProdutoPopup").style.display = "none";
      });

      document.getElementById("cadastrarProduto").addEventListener("click", function () {
        const foto = document.getElementById("novoProdutoFoto").value;
        const cod = document.getElementById("novoProdutoCod").value;
        const nome = document.getElementById("novoProdutoNome").value;
        const categoria = document.getElementById("novoProdutoCategoria").value;
        const un = document.getElementById("novoProdutoUn").value;
        const data = document.getElementById("novoProdutoData").value;
        const fornecedor = document.getElementById("novoProdutoFornecedor").value;
        const compra = document.getElementById("novoProdutoCompra").value;
        const venda = document.getElementById("novoProdutoVenda").value;
        const estoque = document.getElementById("novoProdutoEstoque").value;
        const estoqueMinimo = document.getElementById("novoProdutoEstoqueMinimo").value;

        const produtos = JSON.parse(localStorage.getItem("produtos")) || [];
        produtos.push({
          foto,
          cod,
          nome,
          categoria,
          un,
          data,
          fornecedor,
          compra,
          venda,
          estoque,
          estoqueMinimo,
        });
        localStorage.setItem("produtos", JSON.stringify(produtos));

        document.getElementById("novoProdutoPopupOverlay").style.display = "none";
        document.getElementById("novoProdutoPopup").style.display = "none";

        // Atualiza a tabela com o novo produto
        const tbody = document.querySelector(".center-table tbody");
        const row = document.createElement("tr");
        row.innerHTML = `
          <td><img src="${foto}" alt="${nome}" width="50"></td>
          <td>${cod}</td>
          <td>${nome}</td>
          <td>${categoria}</td>
          <td>${un}</td>
          <td>${data}</td>
          <td>${fornecedor}</td>
          <td>R$ ${compra}</td>
          <td>R$ ${venda}</td>
          <td class="estoque">${estoque}</td>
          <td>${estoqueMinimo}</td>
          <td>
            <a href="#" class="edit-button"><i class="fas fa-edit" style="color: #4caf50; font-size: 20px"></i></a>
            <a href="#" class="delete-button" onclick="confirmDelete(event)"><i class="fas fa-trash" style="color: #dc3545; font-size: 20px"></i></a>
          </td>
        `;
        tbody.appendChild(row);
      });

      function confirmDelete(event) {
        event.preventDefault(); // Evita o comportamento padrão do link
        const confirmation = confirm("Você tem certeza que deseja excluir este item?");
        if (confirmation) {
          // Aqui você pode adicionar a lógica para excluir o item
          alert("Item excluído com sucesso!");
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const produtos = JSON.parse(localStorage.getItem("produtos")) || [];
        const tbody = document.querySelector(".center-table tbody");
        tbody.innerHTML = ""; // Limpa a tabela antes de preencher os dados

        produtos.forEach((produto) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td><img src="${produto.foto}" alt="${produto.nome}" width="50"></td>
            <td>${produto.cod}</td>
            <td>${produto.nome}</td>
            <td>${produto.categoria}</td>
            <td>${produto.un}</td>
            <td>${produto.data}</td>
            <td>${produto.fornecedor}</td>
            <td>R$ ${produto.compra}</td>
            <td>R$ ${produto.venda}</td>
            <td class="estoque">${produto.estoque}</td>
            <td>${produto.estoqueMinimo}</td>
            <td>
              <a href="#" class="edit-button"><i class="fas fa-edit" style="color: #4caf50; font-size: 20px"></i></a>
              <a href="#" class="delete-button" onclick="confirmDelete(event)"><i class="fas fa-trash" style="color: #dc3545; font-size: 20px"></i></a>
            </td>
          `;
          tbody.appendChild(row);
        });
      });
    </script>
  </body>
</html>